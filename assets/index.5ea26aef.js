var T=Object.defineProperty,I=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var j=(r,t,n)=>t in r?T(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,u=(r,t)=>{for(var n in t||(t={}))b.call(t,n)&&j(r,n,t[n]);if(g)for(var n of g(t))N.call(t,n)&&j(r,n,t[n]);return r},p=(r,t)=>I(r,D(t));var k=(r,t)=>{var n={};for(var s in r)b.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&g)for(var s of g(r))t.indexOf(s)<0&&N.call(r,s)&&(n[s]=r[s]);return n};import{j as v,r as a,L as x,A as B,R as O,F,u as V,M as q,B as H,a as z,b as S,c as Q}from"./vendor.84ffc8e7.js";const U=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};U();const E={"clr-text":{light:"hsl(200,15%,8%)",dark:"hsl(0,0%,100%)"},"clr-elements":{light:"hsl(0,0%,100%)",dark:"hsl(209, 23%, 22%)"},"clr-input":{light:"hsl(0,0%,52%)",dark:"hsl(0, 0%, 100%)"},"clr-bg":{light:"hsl(0,0%,98%)",dark:"hsl(207, 26%, 17%)"},"clr-link":{light:"hsl(0,0%,98%)",dark:"hsl(209, 23%, 22%)"},"shadow-color":{light:"280deg 6% 76%",dark:"0deg 0% 17%"},"shadow-button":{light:"0 0 4px 2px lightgrey",dark:"0 0 3px 1px rgba(18, 10, 7, 0.5)"}},M="--initial-color-mode",P="color-mode";(function(){let t="light";const n=window.localStorage.getItem(P),o=typeof window.matchMedia("(prefers-color-scheme: dark)").matches=="boolean";typeof n=="string"&&(n==="light"||n==="dark")?t=n:t=o?"dark":"light";let c=document.documentElement;c.style.setProperty(M,t),Object.entries(E).forEach(([l,d])=>{const h=`--${l}`;c.style.setProperty(h,d[t])})})();const e=v.exports.jsx,i=v.exports.jsxs,W=v.exports.Fragment,R={searchKey:"",fetched:[],init:[],filtered:[],error:""},C=a.exports.createContext(R),y=a.exports.createContext(null),Y=["ger","usa","ind","can","mex","npl","chn","mar","prt","and"];function G(r,t){switch(t.type){case"init":return t.error?p(u({},r),{error:t.error}):t.data?p(u({},r),{init:t.data,fetched:t.data,filtered:t.data}):r;case"new-search":return t.error?p(u({},r),{error:t.error}):t.data?p(u({},r),{searchKey:t.searchKey,fetched:t.data,filtered:t.data}):r;case"empty-search":return r.searchKey?p(u({},r),{searchKey:"",filtered:r.init,fetched:r.init}):r;case"new-fetch":return r.init.concat(t.data),r.init.length>10&&r.init.splice(0,r.init.length-10),r;case"region-filter":const n=r.fetched.filter(s=>s.region===t.region);return p(u({},r),{filtered:n});case"no-filter":return r.searchKey?p(u({},r),{filtered:r.fetched}):p(u({},r),{filtered:r.init,fetched:r.init});default:return r}}const J=({children:r})=>{const[t,n]=a.exports.useReducer(G,R),s=a.exports.useCallback(async function(){const o=await fetch(`https://restcountries.com/v3.1/alpha?codes=${Y.join(",")}`);if(o.status===200){const c=await o.json();n({type:"init",data:c})}else n({type:"init",error:o.statusText})},[]);return a.exports.useCallback(async()=>{t.init.length===0?await s():console.log("cache already uptodate!")},[]),a.exports.useEffect(()=>{s()},[]),e(C.Provider,{value:t,children:e(y.Provider,{value:n,children:r})})},X="_card_1x2vg_1",Z="_card__logo_1x2vg_19",ee="_card__details_1x2vg_31";var w={card:X,card__logo:Z,card__details:ee};const re=({flag:r,country:t,population:n,region:s,capital:o,code:c})=>e("div",{className:w.card,children:i(x,{to:`/country/${c}`,style:{textDecoration:"none"},children:[e("div",{className:w.card__logo,children:e("img",{src:r,alt:`The flag of ${t}`})}),i("div",{className:w.card__details,children:[e("h2",{children:t}),i("dl",{children:[i("div",{children:[e("dt",{children:"Population"}),e("dd",{children:n})]}),i("div",{children:[e("dt",{children:"Region"}),e("dd",{children:s})]}),i("div",{children:[e("dt",{children:"Capital"}),e("dd",{children:o})]})]})]})]})}),te="_countries_1sjxw_1";var ne={countries:te};const oe=()=>{const r=a.exports.useContext(C);return e("section",{className:ne.countries,children:r.filtered?r.filtered.map(t=>e(re,{capital:t.capital&&t.capital[0],country:t.name.common,flag:t.flags.png,population:t.population,region:t.region,code:t.cioc},t.cioc)):null})},ce="_form__field_1c7v3_1",se="_field__body_1c7v3_7",ie="_field__footer_1c7v3_10";var m={form__field:ce,field__body:se,field__footer:ie,"field-input":"_field-input_1c7v3_15","left-adornment":"_left-adornment_1c7v3_50"};const ae=()=>{const[r,t]=a.exports.useState(""),[n,s]=a.exports.useState(""),o=a.exports.useContext(y),c=async d=>{const h=await fetch(`https://restcountries.com/v3.1/name/${d}`);if(h.status===200){const _=await h.json();s(""),o({type:"new-search",searchKey:r,data:_})}else s(h.statusText),o({type:"new-search",searchKey:r,error:h.statusText})},l=async d=>{d.key==="Enter"&&(r?await c(r):o({type:"empty-search"}))};return i("div",{className:m.form__field,children:[e("div",{className:m.field__body,children:i("div",{className:m["field-input"],children:[e("div",{className:m["left-adornment"],"aria-hidden":"true",children:e(B,{})}),e("input",{type:"text",name:"search",placeholder:"Search for a country...",value:r,onChange:d=>t(d.target.value),onKeyUp:l}),e("fieldset",{"aria-hidden":"true"})]})}),e("div",{className:m.field__footer,children:n&&e("p",{className:m.error,children:n})})]})};var le={"field-select":"_field-select_1aw36_1"};const de=()=>{const[r,t]=a.exports.useState(""),n=a.exports.useContext(y),s=o=>{const c=o.target.value;t(c),r!==c&&n(c==="ps"?{type:"no-filter"}:{type:"region-filter",region:c})};return i("div",{className:le["field-select"],children:[i("select",{id:"region",value:r,onChange:s,children:[e("option",{value:"ps",children:"Filter by Region"}),e("option",{value:"Africa",children:"Africa"}),e("option",{value:"Americas",children:"Americas"}),e("option",{value:"Asia",children:"Asia"}),e("option",{value:"Europe",children:"Europe"}),e("option",{value:"Oceania",children:"Oceania"})]}),e("fieldset",{"aria-hidden":"true"})]})},$=a.exports.createContext({}),he=({children:r})=>{const[t,n]=a.exports.useState("");a.exports.useEffect(()=>{const c=window.document.documentElement.style.getPropertyValue(M);n(c)},[]);const s=O.useMemo(()=>{function o(c){const l=window.document.documentElement;n(c),localStorage.setItem(P,c),Object.entries(E).forEach(([d,h])=>{const _=`--${d}`;l.style.setProperty(_,h[c])})}return{colorMode:t,setColorMode:o}},[t,n]);return e($.Provider,{value:s,children:r})};var ue={"theme-changer":"_theme-changer_1wynv_1"};const pe=()=>{const{colorMode:r,setColorMode:t}=a.exports.useContext($),n=r==="light";return i("button",{className:ue["theme-changer"],onClick:()=>{t(n?"dark":"light")},"aria-label":`change theme to ${n?"dark":"light"} mode`,children:[e(F,{}),"Dark Mode"]})},fe="_header_lo4lu_1",_e="_container_lo4lu_8";var L={header:fe,container:_e};const me=()=>e("header",{className:L.header,children:i("div",{className:L.container,children:[e(x,{to:"/",children:e("h1",{children:"Where in the world?"})}),e(pe,{})]})}),A=n=>{var s=n,{children:r}=s,t=k(s,["children"]);return i(W,{children:[e(me,{}),e("main",p(u({},t),{children:e("div",{className:"container",children:r})}))]})},ge="_wrapper_4zi2r_1",ye="_controls_4zi2r_4";var K={wrapper:ge,controls:ye};const ve=()=>e(A,{children:i("div",{className:K.wrapper,children:[i("section",{className:K.controls,children:[e(ae,{}),e(de,{})]}),e(oe,{})]})}),xe="_wrapper_8jahp_1",Ce="_button_8jahp_5",we="_country_8jahp_20",be="_flag_8jahp_24",Ne="_details_8jahp_33",je="_dls_8jahp_41",ke="_borders_8jahp_59";var f={wrapper:xe,button:Ce,country:we,flag:be,details:Ne,dls:je,borders:ke};const Oe=r=>e("button",{className:f.button,children:r.children}),Se=()=>{const r=a.exports.useContext(C),t=a.exports.useContext(y),[n,s]=a.exports.useState(null),{code:o}=V();return a.exports.useEffect(()=>{const c=async d=>{const h=await fetch(`https://restcountries.com/v3.1/alpha/${d}`);if(h.status===200){const _=await h.json();s(_[0]),t({type:"new-fetch",data:_})}},l=r.fetched.filter(d=>d.cioc===o);l.length!==0?s(l[0]):c(o)},[]),e(A,{className:"detail",children:i("div",{className:f.wrapper,children:[i(x,{to:"/",className:f.button,children:[e(q,{}),"Back"]}),n&&i("section",{className:f.country,children:[e("div",{className:f.flag,children:e("img",{src:n.flags.png})}),i("div",{className:f.details,children:[e("h2",{children:n.name.common}),i("div",{children:[i("div",{className:f.dls,children:[i("dl",{children:[i("div",{children:[e("dt",{children:"Native name"}),e("dd",{children:n.name.nativeName[Object.keys(n.languages)[0]].common})]}),i("div",{children:[e("dt",{children:"Population"}),e("dd",{children:n.population})]}),i("div",{children:[e("dt",{children:"Region"}),e("dd",{children:n.region})]}),i("div",{children:[e("dt",{children:"Sub Region"}),e("dd",{children:n.subregion})]}),i("div",{children:[e("dt",{children:"Capital"}),e("dd",{children:n.capital})]})]}),i("dl",{children:[i("div",{children:[e("dt",{children:"Top Level Domain"}),e("dd",{children:n.tld[0]})]}),i("div",{children:[e("dt",{children:"Currencies"}),e("dd",{children:n.currencies[Object.keys(n.currencies)[0]].name})]}),i("div",{children:[e("dt",{children:"Languages"}),e("dd",{children:Object.values(n.languages).join(", ")})]})]})]}),e("div",{className:f.borders,children:i("dl",{children:[e("dt",{children:"Border Countries"}),e("dd",{children:n.borders.map((c,l)=>e(Oe,{children:c},l))})]})})]})]})]})]})})};a.exports.createContext(null);function Ee(){return e(he,{children:e(J,{children:e("div",{children:e(H,{basename:"/fe-c6-search-country",children:i(z,{children:[e(S,{path:"/",element:e(ve,{})}),e(S,{path:"/country/:code",element:e(Se,{})})]})})})})})}Q.render(e(O.StrictMode,{children:e(Ee,{})}),document.getElementById("root"));
