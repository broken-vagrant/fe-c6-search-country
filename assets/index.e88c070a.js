var T=Object.defineProperty,I=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var k=(r,t,n)=>t in r?T(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,u=(r,t)=>{for(var n in t||(t={}))N.call(t,n)&&k(r,n,t[n]);if(g)for(var n of g(t))j.call(t,n)&&k(r,n,t[n]);return r},f=(r,t)=>I(r,D(t));var O=(r,t)=>{var n={};for(var i in r)N.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&g)for(var i of g(r))t.indexOf(i)<0&&j.call(r,i)&&(n[i]=r[i]);return n};import{j as v,r as l,R as x,L as b,A as B,u as F,M as q,F as V,B as H,a as Q,b as S,c as U}from"./vendor.027fb570.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};W();const E={"clr-text":{light:"hsl(200,15%,8%)",dark:"hsl(0,0%,100%)"},"clr-elements":{light:"hsl(0,0%,100%)",dark:"hsl(209, 23%, 22%)"},"clr-input":{light:"hsl(0,0%,52%)",dark:"hsl(0, 0%, 100%)"},"clr-bg":{light:"hsl(0,0%,98%)",dark:"hsl(207, 26%, 17%)"},"clr-link":{light:"hsl(0,0%,98%)",dark:"hsl(209, 23%, 22%)"},"shadow-color":{light:"280deg 6% 76%",dark:"0deg 0% 17%"},"shadow-button":{light:"0 0 4px 2px lightgrey",dark:"0 0 3px 1px rgba(18, 10, 7, 0.5)"}},M="--initial-color-mode",P="color-mode";(function(){let t="light";const n=window.localStorage.getItem(P),o=typeof window.matchMedia("(prefers-color-scheme: dark)").matches=="boolean";typeof n=="string"&&(n==="light"||n==="dark")?t=n:t=o?"dark":"light";let c=document.documentElement;c.style.setProperty(M,t),Object.entries(E).forEach(([a,d])=>{const h=`--${a}`;c.style.setProperty(h,d[t])})})();const e=v.exports.jsx,s=v.exports.jsxs,Y=v.exports.Fragment,R={searchKey:"",fetched:[],init:[],filtered:[],error:""},C=l.exports.createContext(R),y=l.exports.createContext(null),z=["ger","usa","ind","can","mex","npl","chn","mar","prt","and"];function G(r,t){switch(t.type){case"init":return t.error?f(u({},r),{error:t.error}):t.data?f(u({},r),{init:t.data,fetched:t.data,filtered:t.data}):r;case"new-search":return t.error?f(u({},r),{error:t.error}):t.data?f(u({},r),{searchKey:t.searchKey,fetched:t.data,filtered:t.data}):r;case"empty-search":return r.searchKey?f(u({},r),{searchKey:"",filtered:r.init,fetched:r.init}):r;case"new-fetch":return r.init.concat(t.data),r.init.length>10&&r.init.splice(0,r.init.length-10),r;case"region-filter":const n=r.fetched.filter(i=>i.region===t.region);return f(u({},r),{filtered:n});case"no-filter":return r.searchKey?f(u({},r),{filtered:r.fetched}):f(u({},r),{filtered:r.init,fetched:r.init});default:return r}}const J=({children:r})=>{const[t,n]=l.exports.useReducer(G,R),i=l.exports.useCallback(async function(){const o=await fetch(`https://restcountries.com/v3.1/alpha?codes=${z.join(",")}`);if(o.status===200){const c=await o.json();n({type:"init",data:c})}else n({type:"init",error:o.statusText})},[]);return l.exports.useCallback(async()=>{t.init.length===0?await i():console.log("cache already uptodate!")},[]),l.exports.useEffect(()=>{i()},[]),e(C.Provider,{value:t,children:e(y.Provider,{value:n,children:r})})},X="_card_oqfnj_1",Z="_card__logo_oqfnj_25",ee="_card__details_oqfnj_37";var w={card:X,card__logo:Z,card__details:ee};const re=x.memo(({flag:r,country:t,population:n,region:i,capital:o,code:c})=>e("div",{className:w.card,children:s(b,{to:`/country/${c}`,style:{textDecoration:"none"},children:[e("div",{className:w.card__logo,children:e("img",{src:r,alt:`The flag of ${t}`})}),s("div",{className:w.card__details,children:[e("h2",{children:t}),s("dl",{children:[s("div",{children:[e("dt",{children:"Population"}),e("dd",{children:n})]}),s("div",{children:[e("dt",{children:"Region"}),e("dd",{children:i})]}),s("div",{children:[e("dt",{children:"Capital"}),e("dd",{children:o})]})]})]})]})})),te="_countries_1sjxw_1";var ne={countries:te};const oe=()=>{const r=l.exports.useContext(C);return e("div",{className:ne.countries,children:r.filtered?r.filtered.map(t=>e(re,{capital:t.capital&&t.capital[0],country:t.name.common,flag:t.flags.png,population:t.population,region:t.region,code:t.cioc},t.name.common)):null})},ce="_form__field_1j07k_1",se="_field__body_1j07k_7",ie="_field__footer_1j07k_9";var m={form__field:ce,field__body:se,field__footer:ie,"field-input":"_field-input_1j07k_14","left-adornment":"_left-adornment_1j07k_49"};const le=()=>{const[r,t]=l.exports.useState(""),[n,i]=l.exports.useState(""),o=l.exports.useContext(y),c=async d=>{const h=await fetch(`https://restcountries.com/v3.1/name/${d}`);if(h.status===200){const _=await h.json();i(""),o({type:"new-search",searchKey:r,data:_})}else i(h.statusText),o({type:"new-search",searchKey:r,error:h.statusText})},a=async d=>{d.key==="Enter"&&(r?await c(r):o({type:"empty-search"}))};return s("div",{className:m.form__field,children:[e("div",{className:m.field__body,children:s("div",{className:m["field-input"],children:[e("div",{className:m["left-adornment"],"aria-hidden":"true",children:e(B,{})}),e("input",{type:"text",name:"search",placeholder:"Search for a country...",value:r,onChange:d=>t(d.target.value),onKeyUp:a}),e("fieldset",{"aria-hidden":"true"})]})}),e("div",{className:m.field__footer,children:n&&e("p",{className:m.error,children:n})})]})},ae="_form__field_1vg95_1";var $={form__field:ae,"field-select":"_field-select_1vg95_8"};const de=()=>{const[r,t]=l.exports.useState(""),n=l.exports.useContext(y),i=o=>{const c=o.target.value;t(c),r!==c&&n(c==="ps"?{type:"no-filter"}:{type:"region-filter",region:c})};return s("div",{className:$.form__field,children:[e("label",{htmlFor:"filter-by-region",children:"Filter by Region "}),s("div",{className:$["field-select"],children:[s("select",{id:"filter-by-region",value:r,onChange:i,children:[e("option",{value:"Africa",children:"Africa"}),e("option",{value:"Americas",children:"Americas"}),e("option",{value:"Asia",children:"Asia"}),e("option",{value:"Europe",children:"Europe"}),e("option",{value:"Oceania",children:"Oceania"})]}),e("fieldset",{"aria-hidden":"true"})]})]})},he="_wrapper_1uiuc_1",ue="_controls_1uiuc_4";var L={wrapper:he,controls:ue};const fe=()=>s("div",{className:L.wrapper,children:[s("div",{className:L.controls,children:[e(le,{}),e(de,{})]}),e(oe,{})]}),pe="_wrapper_8jahp_1",_e="_button_8jahp_5",me="_country_8jahp_20",ge="_flag_8jahp_24",ye="_details_8jahp_33",ve="_dls_8jahp_41",xe="_borders_8jahp_59";var p={wrapper:pe,button:_e,country:me,flag:ge,details:ye,dls:ve,borders:xe};const be=r=>e("button",{className:p.button,children:r.children}),Ce=()=>{const r=l.exports.useContext(C),t=l.exports.useContext(y),[n,i]=l.exports.useState(null),{code:o}=F();return l.exports.useEffect(()=>{const c=async d=>{const h=await fetch(`https://restcountries.com/v3.1/alpha/${d}`);if(h.status===200){const _=await h.json();i(_[0]),t({type:"new-fetch",data:_})}},a=r.fetched.filter(d=>d.cioc===o);a.length!==0?i(a[0]):c(o)},[]),s("div",{className:p.wrapper,children:[s(b,{to:"/",className:p.button,children:[e(q,{}),"Back"]}),n&&s("section",{className:p.country,children:[e("div",{className:p.flag,children:e("img",{src:n.flags.png})}),s("div",{className:p.details,children:[e("h2",{children:n.name.common}),s("div",{children:[s("div",{className:p.dls,children:[s("dl",{children:[s("div",{children:[e("dt",{children:"Native name"}),e("dd",{children:n.name.nativeName[Object.keys(n.languages)[0]].common})]}),s("div",{children:[e("dt",{children:"Population"}),e("dd",{children:n.population})]}),s("div",{children:[e("dt",{children:"Region"}),e("dd",{children:n.region})]}),s("div",{children:[e("dt",{children:"Sub Region"}),e("dd",{children:n.subregion})]}),s("div",{children:[e("dt",{children:"Capital"}),e("dd",{children:n.capital})]})]}),s("dl",{children:[s("div",{children:[e("dt",{children:"Top Level Domain"}),e("dd",{children:n.tld[0]})]}),s("div",{children:[e("dt",{children:"Currencies"}),e("dd",{children:n.currencies[Object.keys(n.currencies)[0]].name})]}),s("div",{children:[e("dt",{children:"Languages"}),e("dd",{children:Object.values(n.languages).join(", ")})]})]})]}),e("div",{className:p.borders,children:s("dl",{children:[e("dt",{children:"Border Countries"}),e("dd",{children:n.borders.map((c,a)=>e(be,{children:c},a))})]})})]})]})]})]})},A=l.exports.createContext({}),we=({children:r})=>{const[t,n]=l.exports.useState("");l.exports.useEffect(()=>{const c=window.document.documentElement.style.getPropertyValue(M);n(c)},[]);const i=x.useMemo(()=>{function o(c){const a=window.document.documentElement;n(c),localStorage.setItem(P,c),Object.entries(E).forEach(([d,h])=>{const _=`--${d}`;a.style.setProperty(_,h[c])})}return{colorMode:t,setColorMode:o}},[t,n]);return e(A.Provider,{value:i,children:r})};var Ne={"theme-changer":"_theme-changer_1wynv_1"};const je=()=>{const{colorMode:r,setColorMode:t}=l.exports.useContext(A),n=r==="light";return s("button",{className:Ne["theme-changer"],onClick:()=>{t(n?"dark":"light")},"aria-label":`change theme to ${n?"dark":"light"} mode`,children:[e(V,{}),"Dark Mode"]})},ke="_header_1hfvu_1",Oe="_container_1hfvu_8";var K={header:ke,container:Oe};const Se=()=>e("header",{className:K.header,children:s("div",{className:K.container,children:[e(b,{to:"/",children:e("h1",{children:"Where in the world?"})}),e(je,{})]})}),Ee=n=>{var i=n,{children:r}=i,t=O(i,["children"]);return s(Y,{children:[e(Se,{}),e("main",f(u({},t),{children:e("div",{className:"container",children:r})}))]})};function Me(){return e(we,{children:e(J,{children:e("div",{children:e(H,{basename:"/fe-c6-search-country",children:e(Ee,{children:s(Q,{children:[e(S,{path:"/",element:e(fe,{})}),e(S,{path:"/country/:code",element:e(Ce,{})})]})})})})})})}U.render(e(x.StrictMode,{children:e(Me,{})}),document.getElementById("root"));
